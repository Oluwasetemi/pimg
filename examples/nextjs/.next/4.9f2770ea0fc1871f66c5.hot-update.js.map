{"version":3,"sources":["/home/ademola/workspace/pimg/dist/pimg.es.js"],"names":[],"mappings":";;;;;;;;;;;;;AAA2B;AAC3B;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;;;;;;;;;;;AAYA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;AAQD;AACA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;;;;;;;;AAUA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,UAAU,OAAO;AACjB,UAAU,OAAO;AACjB,UAAU,SAAS;AACnB,UAAU,iBAAiB;AAC3B,UAAU,OAAO;AACjB,UAAU,OAAO;AACjB;;AAEA;AACA;;AAEA;AACA,mFAAmF;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,iEAAiE,aAAa;AAC9E;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,0BAA0B,aAAa;AACvC,GAAG;AACH,0BAA0B,2BAA2B;AACrD,GAAG;AACH,0BAA0B,mBAAmB;AAC7C,GAAG;AACH,0BAA0B,mBAAmB;AAC7C,GAAG;AACH;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,MAAM,mCAAmC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA,EAAE;AACF;AACA,CAAC;;AAED;AACA;AACA;;AAEQ;AACR;AACA","file":"4.9f2770ea0fc1871f66c5.hot-update.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport 'whatwg-fetch';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n/**\n * @function config\n * @instance instance\n * @prop {String} className - The default className's for your PIMG(s)\n * @prop {String} placeholderClassName - The default placeholder className's for your image(s)\n * @prop {Function} onError - Determines how errors are handled in the component\n * @prop {Boolean | Object} dataSaver - Choose to use dataSaver mode\n * @prop {String} dataSaver.wrapperClassName - DataSaver wrapper className\n * @prop {String} dataSaver.buttonClassName - DataSaver button className\n */\n\nvar config = function () {\n\tvar instance = void 0;\n\n\tvar init = function init() {\n\t\tvar _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t    _ref$buttonClassName = _ref.buttonClassName,\n\t\t    buttonClassName = _ref$buttonClassName === undefined ? 'pimg__btn' : _ref$buttonClassName,\n\t\t    _ref$className = _ref.className,\n\t\t    className = _ref$className === undefined ? 'pimg' : _ref$className,\n\t\t    _ref$dataSaver = _ref.dataSaver,\n\t\t    dataSaver = _ref$dataSaver === undefined ? false : _ref$dataSaver,\n\t\t    _ref$fetchOnDemand = _ref.fetchOnDemand,\n\t\t    fetchOnDemand = _ref$fetchOnDemand === undefined ? false : _ref$fetchOnDemand,\n\t\t    _ref$error = _ref.error,\n\t\t    error = _ref$error === undefined ? null : _ref$error,\n\t\t    _ref$placeholderClass = _ref.placeholderClassName,\n\t\t    placeholderClassName = _ref$placeholderClass === undefined ? 'pimg__placeholder' : _ref$placeholderClass,\n\t\t    _ref$wrapperClassName = _ref.wrapperClassName,\n\t\t    wrapperClassName = _ref$wrapperClassName === undefined ? 'pimg__wrapper' : _ref$wrapperClassName;\n\n\t\tif ((typeof dataSaver === 'undefined' ? 'undefined' : _typeof(dataSaver)) !== 'object' && dataSaver === true) {\n\t\t\tdataSaver = {\n\t\t\t\twrapperClassName: wrapperClassName,\n\t\t\t\tbuttonClassName: buttonClassName\n\t\t\t};\n\t\t} else if ((typeof dataSaver === 'undefined' ? 'undefined' : _typeof(dataSaver)) === 'object') {\n\t\t\tdataSaver = {\n\t\t\t\twrapperClassName: dataSaver.wrapperClassName || wrapperClassName,\n\t\t\t\tbuttonClassName: dataSaver.buttonClassName || buttonClassName\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tonError: function onError(error) {\n\t\t\t\terror = error;\n\t\t\t},\n\t\t\tgetClassName: function getClassName() {\n\t\t\t\treturn className;\n\t\t\t},\n\t\t\tgetButtonClassName: function getButtonClassName() {\n\t\t\t\treturn buttonClassName;\n\t\t\t},\n\t\t\tgetDataSaver: function getDataSaver() {\n\t\t\t\treturn dataSaver;\n\t\t\t},\n\t\t\tgetError: function getError(cb) {\n\t\t\t\treturn cb(error);\n\t\t\t},\n\t\t\tgetFetchOnDemand: function getFetchOnDemand() {\n\t\t\t\treturn fetchOnDemand;\n\t\t\t},\n\t\t\tgetPlaceholderClassName: function getPlaceholderClassName() {\n\t\t\t\treturn placeholderClassName;\n\t\t\t},\n\t\t\tgetWrapperClassName: function getWrapperClassName() {\n\t\t\t\treturn wrapperClassName;\n\t\t\t}\n\t\t};\n\t};\n\n\treturn function (params) {\n\t\treturn instance ? instance : instance = init(params);\n\t};\n}();\n\nvar Image = function (_Component) {\n\tinherits(Image, _Component);\n\n\tfunction Image() {\n\t\tvar _ref;\n\n\t\tvar _temp, _this, _ret;\n\n\t\tclassCallCheck(this, Image);\n\n\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\targs[_key] = arguments[_key];\n\t\t}\n\n\t\treturn _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = Image.__proto__ || Object.getPrototypeOf(Image)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n\t\t\tblob: null,\n\t\t\tloading: true,\n\t\t\tdelayed: false,\n\t\t\tplaceholder: null\n\t\t}, _this.setBlob = function (blob) {\n\t\t\treturn _this.setState({ blob: blob });\n\t\t}, _this.setPlaceholder = function (placeholder) {\n\t\t\treturn _this.setState({ placeholder: placeholder });\n\t\t}, _this.setLoading = function (loading) {\n\t\t\treturn _this.setState({ loading: loading });\n\t\t}, _this.delayFetchingImage = function (delayed) {\n\t\t\treturn _this.setState({ delayed: delayed });\n\t\t}, _this.fetchImage = function (src) {\n\t\t\tfetch(src).then(function (res) {\n\t\t\t\treturn res.blob();\n\t\t\t}).then(function (res) {\n\t\t\t\t_this.setBlob(URL.createObjectURL(res));\n\t\t\t\t_this.setLoading(false);\n\t\t\t});\n\t\t}, _this.image = function () {\n\t\t\treturn _this.imgElement;\n\t\t}, _this.fetchOnDemand = function (src) {\n\t\t\ttry {\n\t\t\t\tvar observer = new IntersectionObserver(function (entries) {\n\t\t\t\t\tvar image = entries[0];\n\n\t\t\t\t\tif (image.isIntersecting) {\n\t\t\t\t\t\t_this.fetchImage(src);\n\t\t\t\t\t\t_this.delayFetchingImage(false);\n\t\t\t\t\t\tobserver.disconnect();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tobserver.observe(_this.image());\n\t\t\t} catch (_) {\n\t\t\t\t// Fail gracefully\n\t\t\t\tconsole.warn('fetchOnDemand not supported on this browser');\n\t\t\t\t_this.fetchImage(src);\n\t\t\t\t_this.delayFetchingImage(false);\n\t\t\t}\n\t\t}, _temp), possibleConstructorReturn(_this, _ret);\n\t}\n\n\tcreateClass(Image, [{\n\t\tkey: 'componentDidMount',\n\t\tvalue: function componentDidMount() {\n\t\t\tvar _props = this.props,\n\t\t\t    dataSaver = _props.dataSaver,\n\t\t\t    src = _props.src,\n\t\t\t    fetchOnDemand = _props.fetchOnDemand,\n\t\t\t    placeholder = _props.placeholder;\n\n\t\t\tvar _config = config(),\n\t\t\t    getDataSaver = _config.getDataSaver,\n\t\t\t    getFetchOnDemand = _config.getFetchOnDemand;\n\n\t\t\t// If it's a Cloudinary Image\n\n\n\t\t\tif (src && src.includes('cloudinary')) {\n\t\t\t\tvar _placeholder = _placeholder || src.replace('/upload/', '/upload/c_thumb,w_30/');\n\n\t\t\t\tthis.setPlaceholder(_placeholder);\n\t\t\t}\n\n\t\t\tif (dataSaver || getDataSaver()) {\n\t\t\t\tthis.delayFetchingImage(true);\n\t\t\t} else if (fetchOnDemand || getFetchOnDemand()) {\n\t\t\t\tthis.delayFetchingImage(true);\n\t\t\t\tthis.fetchOnDemand(src);\n\t\t\t} else {\n\t\t\t\tthis.fetchImage(src);\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'componentWillReceiveProps',\n\t\tvalue: function componentWillReceiveProps(_ref2) {\n\t\t\tvar dataSaver = _ref2.dataSaver,\n\t\t\t    src = _ref2.src;\n\n\t\t\t// This will help when toggling DataSaver mode\n\t\t\tvar _config2 = config(),\n\t\t\t    getDataSaver = _config2.getDataSaver;\n\n\t\t\tif (dataSaver || getDataSaver()) {\n\t\t\t\tthis.delayFetchingImage(true);\n\t\t\t} else {\n\t\t\t\tthis.delayFetchingImage(false);\n\t\t\t\t// this.fetchImage(src)\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'render',\n\t\tvalue: function render() {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar _props2 = this.props,\n\t\t\t    className = _props2.className,\n\t\t\t    dataSaver = _props2.dataSaver,\n\t\t\t    fetchOnDemand = _props2.fetchOnDemand,\n\t\t\t    placeholderClassName = _props2.placeholderClassName,\n\t\t\t    src = _props2.src,\n\t\t\t    placeholder = _props2.placeholder,\n\t\t\t    rest = objectWithoutProperties(_props2, ['className', 'dataSaver', 'fetchOnDemand', 'placeholderClassName', 'src', 'placeholder']);\n\t\t\tvar _state = this.state,\n\t\t\t    blob = _state.blob,\n\t\t\t    delayed = _state.delayed,\n\t\t\t    loading = _state.loading;\n\n\t\t\tvar _config3 = config(),\n\t\t\t    getButtonClassName = _config3.getButtonClassName,\n\t\t\t    getClassName = _config3.getClassName,\n\t\t\t    getDataSaver = _config3.getDataSaver,\n\t\t\t    getPlaceholderClassName = _config3.getPlaceholderClassName,\n\t\t\t    getWrapperClassName = _config3.getWrapperClassName;\n\n\t\t\tvar classes = className ? className + ' ' + (placeholderClassName || getPlaceholderClassName()) : placeholderClassName ? (className || getClassName()) + ' ' + placeholderClassName : getClassName() + ' ' + getPlaceholderClassName();\n\n\t\t\tif ((dataSaver || getDataSaver()) && loading || delayed) {\n\t\t\t\treturn React.createElement(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ className: getWrapperClassName() },\n\t\t\t\t\tReact.createElement('img', _extends({\n\t\t\t\t\t\tclassName: classes,\n\t\t\t\t\t\tsrc: placeholder || this.state.placeholder,\n\t\t\t\t\t\tref: function ref(i) {\n\t\t\t\t\t\t\treturn _this2.imgElement = i;\n\t\t\t\t\t\t}\n\t\t\t\t\t}, rest)),\n\t\t\t\t\tReact.createElement(\n\t\t\t\t\t\t'button',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclassName: getButtonClassName(),\n\t\t\t\t\t\t\tonClick: function onClick() {\n\t\t\t\t\t\t\t\treturn _this2.fetchImage(_this2.props.src);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'Load image'\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (loading) {\n\t\t\t\treturn React.createElement('img', _extends({\n\t\t\t\t\tclassName: classes,\n\t\t\t\t\tsrc: placeholder || this.state.placeholder,\n\t\t\t\t\tref: function ref(i) {\n\t\t\t\t\t\treturn _this2.imgElement = i;\n\t\t\t\t\t}\n\t\t\t\t}, rest));\n\t\t\t}\n\n\t\t\treturn React.createElement('img', _extends({\n\t\t\t\tclassName: className ? className : getClassName(),\n\t\t\t\tsrc: blob\n\t\t\t}, rest));\n\t\t}\n\t}]);\n\treturn Image;\n}(Component);\n\nImage.propTypes = {\n\tsrc: PropTypes.string.isRequired\n};\n\nexport { config };\nexport default Image;\n//# sourceMappingURL=pimg.es.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/ademola/workspace/pimg/dist/pimg.es.js\n// module id = ../../dist/pimg.es.js\n// module chunks = 4"],"sourceRoot":""}