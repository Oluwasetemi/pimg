{"version":3,"sources":["../src/index.js"],"names":["Image","state","thumb","this","props","src","replace","setState","then","res","blob","URL","createObjectURL","loading","catch","err","console","log","React","createElement","className","Component"],"mappings":"mhCAGMA,MAAAA,SAAAA,6OACLC,gBACU,OACH,WACC,kIAIHC,EAAQC,KAAKC,MAAMC,IAAIC,QAAQ,WAAY,mCAE1CC,UAAWL,MAAAA,UAEVC,KAAKC,MAAMC,KACfG,KAAK,SAAAC,SAAOA,GAAIC,SAChBF,KAAK,SAAAC,MACDC,GAAOC,IAAIC,gBAAgBH,KAC1BF,UAAWG,KAAAA,EAAMG,SAAS,MAE/BC,MAAM,SAAAC,SAAOC,SAAQC,IAAIF,4CAIvBZ,MAAKF,MAAMY,QACPK,MAAAC,cAAA,OAAKC,UAAU,qBAAqBf,IAAKF,KAAKF,MAAMC,QAGrDgB,MAAAC,cAAA,OAAKC,UAAU,OAAOf,IAAKF,KAAKF,MAAMS,cA1B3BQ,MAAMG","file":"pimg.js","sourcesContent":["import React from 'react'\nimport 'whatwg-fetch'\n\nclass Image extends React.Component {\n\tstate = {\n\t\tloading: true,\n\t\tblob: null,\n\t\tthumb: null\n\t}\n\n\tcomponentDidMount() {\n\t\tlet thumb = this.props.src.replace('/upload/', '/upload/t_media_lib_thumb/')\n\n\t\tthis.setState({ thumb })\n\n\t\tfetch(this.props.src)\n\t\t\t.then(res => res.blob())\n\t\t\t.then(res => {\n\t\t\t\tlet blob = URL.createObjectURL(res)\n\t\t\t\tthis.setState({ blob, loading: false })\n\t\t\t})\n\t\t\t.catch(err => console.log(err))\n\t}\n\n\trender() {\n\t\tif (this.state.loading) {\n\t\t\treturn <img className=\"pimg pimg__loading\" src={this.state.thumb} />\n\t\t}\n\n\t\treturn <img className=\"pimg\" src={this.state.blob} />\n\t}\n}\n\nexport default Image\n"]}